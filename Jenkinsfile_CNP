#!groovy

@Library("Infrastructure")

String product = "div"
String component = "pfe"

withPipeline("nodejs", product, component) {  
  after('build') {
    sh 'yarn setup'
  }
  after('test') {
    sh 'yarn test-validation'
  }

  after('functionalTest:saat') {
    steps.archiveArtifacts "tests/functional-output/**/*.*"
  }

  after('functionalTest:preview') {
    steps.archiveArtifacts "tests/functional-output/**/*.*"
  }

  after('functionalTest:aat') {
    steps.archiveArtifacts "tests/functional-output/**/*.*"
  }

  enableSlackNotifications('#div-dev')
}
