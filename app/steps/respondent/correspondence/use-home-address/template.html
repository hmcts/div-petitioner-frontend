{% from "common/components/formElements.html" import radioButton %}
{% extends "question.html" %}
{% block question %}
    {% if fields.featureToggles.value.ft_represented_respondent_journey == "true" %}
        {{ content.updatedQuestion | safe }}
    {% else %}
        {{ content.question | safe }}
    {% endif %}
{% endblock %}

{% block form %}
    {% if fields.featureToggles.value.ft_represented_respondent_journey == "true" %}

    <p class="govuk-body">{{ content.updatedCorrespondence | safe }}</p>

    {% if fields.divorceSentToAddress.value %}
        <p class="govuk-body">
            {{ fields.divorceSentToAddress.value.address | join("<br/>") | safe }}
        </p>
    {% endif %}

    <div class="govuk-form-group {{ 'govuk-form-group--error' if fields.respondentCorrespondenceUseHomeAddress.error }}">
        <fieldset id="respondentCorrespondenceUseHomeAddress" class="govuk-fieldset">
            <legend class="govuk-fieldset__legend visually-hidden">{{ content.updatedQuestion | safe }}</legend>
            {{ errorsFor(fields.respondentCorrespondenceUseHomeAddress) }}
            {{ radioButton(
                value = 'Yes',
                label = content.updatedRadioOptions.theirAddress,
                name = 'respondentCorrespondenceUseHomeAddress',
                field = fields.respondentCorrespondenceUseHomeAddress
            ) }}
            {{ radioButton(
                value = 'Solicitor',
                label = content.updatedRadioOptions.solictorAddress,
                name = 'respondentCorrespondenceUseHomeAddress',
                field = fields.respondentCorrespondenceUseHomeAddress
            ) }}
            {{ radioButton(
                value = 'No',
                label = content.updatedRadioOptions.anotherAddress,
                name = 'respondentCorrespondenceUseHomeAddress',
                field = fields.respondentCorrespondenceUseHomeAddress
            ) }}
        </fieldset>
    </div>

    {% else %}

    <p class="govuk-body">{{ content.correspondence | safe }}</p>

    {% if fields.respondentCorrespondenceDisplayAddress.value %}
        <p class="govuk-body">
            {{ fields.respondentCorrespondenceDisplayAddress.value.address | join("<br/>") | safe }}
        </p>
    {% endif %}

    <div class="govuk-form-group {{ 'govuk-form-group--error' if fields.respondentCorrespondenceUseHomeAddress.error }}">
        <fieldset id="respondentCorrespondenceUseHomeAddress" class="govuk-fieldset">
            <legend class="govuk-fieldset__legend visually-hidden">{{ content.question | safe }}</legend>
            {{ errorsFor(fields.respondentCorrespondenceUseHomeAddress) }}
            {{ radioButton(
                value = 'Yes',
                label = content.yes,
                name = 'respondentCorrespondenceUseHomeAddress',
                field = fields.respondentCorrespondenceUseHomeAddress
            ) }}
            {{ radioButton(
                value = 'No',
                label = content.no,
                name = 'respondentCorrespondenceUseHomeAddress',
                field = fields.respondentCorrespondenceUseHomeAddress
            ) }}
        </fieldset>
    </div>

    {% endif %}
{% endblock %}
