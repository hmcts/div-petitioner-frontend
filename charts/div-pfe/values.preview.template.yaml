tags:
  idam-pr: true
  pr: true

idam-pr:
  redirect_uris:
    divorce:
      - https://${SERVICE_FQDN}/authenticated

nodejs:
    environment:
        APPINSIGHTS_INSTRUMENTATIONKEY: "dummykey"
        FEATURE_STRATEGIC_PAY: "false"
        REDISCLOUD_URL: "redis://${SERVICE_NAME}-redis-master:6379"
        PUBLIC_HOSTNAME: "https://${SERVICE_NAME}.service.core-compute-preview.internal"
        EQUALITY_URL: "https://pcq.aat.platform.hmcts.net"
        PRD_ORGANISATION_API_URL: "http://rd-professional-api-aat.service.core-compute-aat.internal/refdata/external/v1/organisations/status"
        ANTENNA_WEBCHAT_URL: "webchat.training.ctsc.hmcts.net"
        ANTENNA_WEBCHAT_SERVICE: "Testing"
        FEATURE_ANTENNA_WEBCHAT_USER_ATTRIBUTE: "true"
        FEATURE_DYNATRACE: "false"
        FEATURE_NEW_APP_CUTOFF_DATE_BANNER: "true"
        DECREE_NISI_FRONTEND_URL: "https://decree-nisi-aks.aat.platform.hmcts.net"

        FEATURE_NEW_APP_CUTOFF: "true"
        ################################################################################################################
        # JS DateTime value representing when the new application cutoff will take effect
        NEW_APP_CUTOFF_DATE: "2022-03-31T16:00:00"

        # Boolean.  True: New app cutoff date test evaluates true.
        #           False: New app cutoff is evaluated against current server datetime.
        NEW_APP_CUTOFF_DATE_OVERRIDE: "true"

        # Boolean. True: Test for existence of a caseId evaluates to true.
        #          False: Check for caseId within session object.
        NEW_APP_CUTOFF_CASEID_OVERRIDE: "false"

        # Array of case states that will trigger a redirect.
        NEW_APP_CUTOFF_REDIRECT_STATES: [
            'AwaitingPayment',
            'AwaitingHWFDecision',
            'AwaitingDocuments',
            'Withdrawn',
            'PendingRejection',
            'Rejected'
        ]

        # Boolean.  True: Case state redirect check evaluates to true.
        #           False: Case state evaluated against array.
        NEW_APP_CUTOFF_STATE_OVERRIDE: "false"

        # Boolean.  Toggle verbose logging of new app cutoff evaluation steps.
        NEW_APP_CUTOFF_DEBUG: "true"
        ################################################################################################################

    keyVaults:
        div:
            secrets:
                - session-secret
                - redis-secret
                - idam-secret
                - os-places-token
                - frontend-secret
                - launchdarkly-key
                - pcq-token-key

    # Don't modify below here
    image: ${IMAGE_NAME}
    ingressHost: ${SERVICE_FQDN}
